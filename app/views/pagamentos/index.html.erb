<p style="color: green"><%= notice %></p>

<div class="container">
  <h2 class="my-4">Pagamentos (<%=Pagamento.all.size%>)</h2>
  
  <%= form_with url: pagamentos_path, method: :get, local: true, class: "row g-3" do %>
    <div class="col-md-3">
      <%= label_tag :pessoa_id, "Pessoa", class: "form-label" %>
      <%= select_tag :pessoa_id, options_from_collection_for_select(Pessoa.all, :id, :nome, params[:pessoa_id]), include_blank: true, class: "form-select" %>
    </div>
    <div class="col-md-3">
      <%= label_tag :status, "Status", class: "form-label" %>
      <%= select_tag :status, options_for_select([['Pago', 1], ['Pendente', 0]], params[:status]), include_blank: true, class: "form-select" %>
    </div>
    <div class="col-md-3">
      <%= label_tag :vencimento, "Vencimento", class: "form-label" %>
      <%= date_field_tag :vencimento, params[:vencimento], class: "form-control" %>
    </div>
    <div class="col-md-3 align-self-end">
      <%= submit_tag "Filtrar", class: "btn btn-primary" %>
    </div>
  <% end %>
  
  <table class="table table-striped mt-4">
    <thead>
      <tr>
        <th>ID</th>
        <th>Pessoa</th>
        <th>Vencimento</th>
        <th>Valor</th>
        <th>Data Pagamento</th>
        <th>Status</th>
        <th>Valor Pago</th>
        <th>Ações</th>
      </tr>
    </thead>
    <tbody>
      <% @pagamentos.each do |pagamento| %>
        <tr>
          <td><%= pagamento.id %></td>
          <td><%= pagamento.pessoa.nome %></td>
          <td><%= pagamento.vencimento %></td>
          <td><%= pagamento.valor %></td>
          <td><%= pagamento.data_pagamento %></td>
          <td><%= pagamento.status == 1 ? 'Pago' : 'Pendente' %></td>
          <td><%= pagamento.valor_pago %></td>
          <td>
            <%= link_to 'Mostrar', pagamento, class: "btn btn-info btn-sm" %>
            <%= link_to 'Editar', edit_pagamento_path(pagamento), class: "btn btn-warning btn-sm" %>
            <%= link_to 'Deletar', pagamento, method: :delete, data: { confirm: 'Tem certeza?' }, class: "btn btn-danger btn-sm" %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>